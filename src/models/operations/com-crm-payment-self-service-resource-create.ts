/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 * @generated-id: 7cc7321172e1
 */

import * as z from "zod/v4-mini";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import * as types from "../../types/primitives.js";
import { SDKValidationError } from "../errors/sdk-validation-error.js";

export type ComCrmPaymentSelfServiceResourceCreateSecurity = {
  secretAPIKey?: string | undefined;
  authorization?: string | undefined;
};

/**
 * The life cycle state of the financial transaction
 */
export const ComCrmPaymentSelfServiceResourceCreateState = {
  Draft: "DRAFT",
  Posted: "POSTED",
} as const;
/**
 * The life cycle state of the financial transaction
 */
export type ComCrmPaymentSelfServiceResourceCreateState = ClosedEnum<
  typeof ComCrmPaymentSelfServiceResourceCreateState
>;

/**
 * The payment method type
 */
export const ComCrmPaymentSelfServiceResourceCreateType = {
  Card: "CARD",
  Account: "ACCOUNT",
  AccountDebit: "ACCOUNT_DEBIT",
  Phone: "PHONE",
  Token: "TOKEN",
  Wallet: "WALLET",
  CrmWallet: "CRM_WALLET",
  OneTimeCardPayment: "ONE_TIME_CARD_PAYMENT",
} as const;
/**
 * The payment method type
 */
export type ComCrmPaymentSelfServiceResourceCreateType = ClosedEnum<
  typeof ComCrmPaymentSelfServiceResourceCreateType
>;

/**
 * Payment method to be used to collect the money
 */
export type ComCrmPaymentSelfServiceResourceCreatePaymentMethod = {
  /**
   * Contact payment method identifier. Applicable and requied when an online paymen tmethod tyoe is selected i.e. Card, Accoount Debit or Wallet.
   */
  id?: string | undefined;
  /**
   * The payment method type
   */
  type?: ComCrmPaymentSelfServiceResourceCreateType | undefined;
};

export type InvoicesPaid = {
  /**
   * The entity identifier that will be created
   */
  id?: string | undefined;
};

export type ExternalPayable = {
  /**
   * The external reference
   */
  reference?: string | undefined;
};

/**
 * A list of custom fields whose values can be set when creating or updating entities
 */
export type ComCrmPaymentSelfServiceResourceCreateCustomField = {
  /**
   * The custom field’s unique key
   */
  key?: string | undefined;
  /**
   * The custom field’s value
   */
  value?: string | undefined;
};

export type ComCrmPaymentSelfServiceResourceCreateRequest = {
  /**
   * The entity identifier that will be created
   */
  id?: string | undefined;
  /**
   * The account against which the financial transaction will be posted
   */
  accountId: string;
  /**
   * The unique identifier of the financial transaction
   */
  typeId?: string | undefined;
  /**
   * The posted date of the financial transaction. Defaults to current date. Applicable only for creation
   */
  postedDate?: number | undefined;
  /**
   * The issued date of the financial transaction. Defaults to current date.
   */
  issuedDate?: number | undefined;
  /**
   * Any notes related to the financial transaction
   */
  notes?: string | undefined;
  /**
   * The life cycle state of the financial transaction
   */
  state?: ComCrmPaymentSelfServiceResourceCreateState | undefined;
  /**
   * Code that uniquely identifies the payment. If not sepcified, then a random and unique 16-digits code will be automatically assigned.
   */
  code?: string | undefined;
  /**
   * The payment intent’s client secret. This is returned by the Payment Gateway integration where the front-end requests for a payment intent.
   */
  clientSecret?: string | undefined;
  /**
   * The amount of the payment
   */
  amount: number;
  /**
   * The payment’s currency. If not specified, then the currency of the contact’s primary account is used. 3-letter ISO 4217 currency code.
   */
  currencyCode?: string | undefined;
  /**
   * The contact on which the financial transaction will be posted against to (contact and organisation are semi-optional)
   */
  contactId?: string | undefined;
  /**
   * Payment method to be used to collect the money
   */
  paymentMethod: ComCrmPaymentSelfServiceResourceCreatePaymentMethod;
  /**
   * List of Invoices intended to be paid through the Payment. If not specified, then the Payment’s amount is allocated based on FIFO.
   */
  invoicesPaid?: Array<InvoicesPaid> | undefined;
  /**
   * An array of reference numbers of external debits to be paid. Either Invoices or External references must be specified (only one of the two)
   */
  externalPayable?: Array<ExternalPayable> | undefined;
  customFields?:
    | Array<ComCrmPaymentSelfServiceResourceCreateCustomField>
    | undefined;
};

/**
 * Created
 */
export type ComCrmPaymentSelfServiceResourceCreateResponse = {
  /**
   * The entity identifier
   */
  id?: string | undefined;
};

/** @internal */
export type ComCrmPaymentSelfServiceResourceCreateSecurity$Outbound = {
  Secret_API_key?: string | undefined;
  authorization?: string | undefined;
};

/** @internal */
export const ComCrmPaymentSelfServiceResourceCreateSecurity$outboundSchema:
  z.ZodMiniType<
    ComCrmPaymentSelfServiceResourceCreateSecurity$Outbound,
    ComCrmPaymentSelfServiceResourceCreateSecurity
  > = z.pipe(
    z.object({
      secretAPIKey: z.optional(z.string()),
      authorization: z.optional(z.string()),
    }),
    z.transform((v) => {
      return remap$(v, {
        secretAPIKey: "Secret_API_key",
      });
    }),
  );

export function comCrmPaymentSelfServiceResourceCreateSecurityToJSON(
  comCrmPaymentSelfServiceResourceCreateSecurity:
    ComCrmPaymentSelfServiceResourceCreateSecurity,
): string {
  return JSON.stringify(
    ComCrmPaymentSelfServiceResourceCreateSecurity$outboundSchema.parse(
      comCrmPaymentSelfServiceResourceCreateSecurity,
    ),
  );
}

/** @internal */
export const ComCrmPaymentSelfServiceResourceCreateState$outboundSchema:
  z.ZodMiniEnum<typeof ComCrmPaymentSelfServiceResourceCreateState> = z.enum(
    ComCrmPaymentSelfServiceResourceCreateState,
  );

/** @internal */
export const ComCrmPaymentSelfServiceResourceCreateType$outboundSchema:
  z.ZodMiniEnum<typeof ComCrmPaymentSelfServiceResourceCreateType> = z.enum(
    ComCrmPaymentSelfServiceResourceCreateType,
  );

/** @internal */
export type ComCrmPaymentSelfServiceResourceCreatePaymentMethod$Outbound = {
  id?: string | undefined;
  type?: string | undefined;
};

/** @internal */
export const ComCrmPaymentSelfServiceResourceCreatePaymentMethod$outboundSchema:
  z.ZodMiniType<
    ComCrmPaymentSelfServiceResourceCreatePaymentMethod$Outbound,
    ComCrmPaymentSelfServiceResourceCreatePaymentMethod
  > = z.object({
    id: z.optional(z.string()),
    type: z.optional(ComCrmPaymentSelfServiceResourceCreateType$outboundSchema),
  });

export function comCrmPaymentSelfServiceResourceCreatePaymentMethodToJSON(
  comCrmPaymentSelfServiceResourceCreatePaymentMethod:
    ComCrmPaymentSelfServiceResourceCreatePaymentMethod,
): string {
  return JSON.stringify(
    ComCrmPaymentSelfServiceResourceCreatePaymentMethod$outboundSchema.parse(
      comCrmPaymentSelfServiceResourceCreatePaymentMethod,
    ),
  );
}

/** @internal */
export type InvoicesPaid$Outbound = {
  id?: string | undefined;
};

/** @internal */
export const InvoicesPaid$outboundSchema: z.ZodMiniType<
  InvoicesPaid$Outbound,
  InvoicesPaid
> = z.object({
  id: z.optional(z.string()),
});

export function invoicesPaidToJSON(invoicesPaid: InvoicesPaid): string {
  return JSON.stringify(InvoicesPaid$outboundSchema.parse(invoicesPaid));
}

/** @internal */
export type ExternalPayable$Outbound = {
  reference?: string | undefined;
};

/** @internal */
export const ExternalPayable$outboundSchema: z.ZodMiniType<
  ExternalPayable$Outbound,
  ExternalPayable
> = z.object({
  reference: z.optional(z.string()),
});

export function externalPayableToJSON(
  externalPayable: ExternalPayable,
): string {
  return JSON.stringify(ExternalPayable$outboundSchema.parse(externalPayable));
}

/** @internal */
export type ComCrmPaymentSelfServiceResourceCreateCustomField$Outbound = {
  key?: string | undefined;
  value?: string | undefined;
};

/** @internal */
export const ComCrmPaymentSelfServiceResourceCreateCustomField$outboundSchema:
  z.ZodMiniType<
    ComCrmPaymentSelfServiceResourceCreateCustomField$Outbound,
    ComCrmPaymentSelfServiceResourceCreateCustomField
  > = z.object({
    key: z.optional(z.string()),
    value: z.optional(z.string()),
  });

export function comCrmPaymentSelfServiceResourceCreateCustomFieldToJSON(
  comCrmPaymentSelfServiceResourceCreateCustomField:
    ComCrmPaymentSelfServiceResourceCreateCustomField,
): string {
  return JSON.stringify(
    ComCrmPaymentSelfServiceResourceCreateCustomField$outboundSchema.parse(
      comCrmPaymentSelfServiceResourceCreateCustomField,
    ),
  );
}

/** @internal */
export type ComCrmPaymentSelfServiceResourceCreateRequest$Outbound = {
  id?: string | undefined;
  account_id: string;
  type_id?: string | undefined;
  posted_date?: number | undefined;
  issued_date?: number | undefined;
  notes?: string | undefined;
  state?: string | undefined;
  code?: string | undefined;
  client_secret?: string | undefined;
  amount: number;
  currency_code?: string | undefined;
  contact_id?: string | undefined;
  payment_method: ComCrmPaymentSelfServiceResourceCreatePaymentMethod$Outbound;
  invoices_paid?: Array<InvoicesPaid$Outbound> | undefined;
  external_payable?: Array<ExternalPayable$Outbound> | undefined;
  custom_fields?:
    | Array<ComCrmPaymentSelfServiceResourceCreateCustomField$Outbound>
    | undefined;
};

/** @internal */
export const ComCrmPaymentSelfServiceResourceCreateRequest$outboundSchema:
  z.ZodMiniType<
    ComCrmPaymentSelfServiceResourceCreateRequest$Outbound,
    ComCrmPaymentSelfServiceResourceCreateRequest
  > = z.pipe(
    z.object({
      id: z.optional(z.string()),
      accountId: z.string(),
      typeId: z.optional(z.string()),
      postedDate: z.optional(z.int()),
      issuedDate: z.optional(z.int()),
      notes: z.optional(z.string()),
      state: z.optional(
        ComCrmPaymentSelfServiceResourceCreateState$outboundSchema,
      ),
      code: z.optional(z.string()),
      clientSecret: z.optional(z.string()),
      amount: z.number(),
      currencyCode: z.optional(z.string()),
      contactId: z.optional(z.string()),
      paymentMethod: z.lazy(() =>
        ComCrmPaymentSelfServiceResourceCreatePaymentMethod$outboundSchema
      ),
      invoicesPaid: z.optional(
        z.array(z.lazy(() => InvoicesPaid$outboundSchema)),
      ),
      externalPayable: z.optional(
        z.array(z.lazy(() => ExternalPayable$outboundSchema)),
      ),
      customFields: z.optional(z.array(z.lazy(() =>
        ComCrmPaymentSelfServiceResourceCreateCustomField$outboundSchema
      ))),
    }),
    z.transform((v) => {
      return remap$(v, {
        accountId: "account_id",
        typeId: "type_id",
        postedDate: "posted_date",
        issuedDate: "issued_date",
        clientSecret: "client_secret",
        currencyCode: "currency_code",
        contactId: "contact_id",
        paymentMethod: "payment_method",
        invoicesPaid: "invoices_paid",
        externalPayable: "external_payable",
        customFields: "custom_fields",
      });
    }),
  );

export function comCrmPaymentSelfServiceResourceCreateRequestToJSON(
  comCrmPaymentSelfServiceResourceCreateRequest:
    ComCrmPaymentSelfServiceResourceCreateRequest,
): string {
  return JSON.stringify(
    ComCrmPaymentSelfServiceResourceCreateRequest$outboundSchema.parse(
      comCrmPaymentSelfServiceResourceCreateRequest,
    ),
  );
}

/** @internal */
export const ComCrmPaymentSelfServiceResourceCreateResponse$inboundSchema:
  z.ZodMiniType<ComCrmPaymentSelfServiceResourceCreateResponse, unknown> = z
    .object({
      id: types.optional(types.string()),
    });

export function comCrmPaymentSelfServiceResourceCreateResponseFromJSON(
  jsonString: string,
): SafeParseResult<
  ComCrmPaymentSelfServiceResourceCreateResponse,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      ComCrmPaymentSelfServiceResourceCreateResponse$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'ComCrmPaymentSelfServiceResourceCreateResponse' from JSON`,
  );
}
