/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import * as types from "../../types/primitives.js";
import { SDKValidationError } from "../errors/sdk-validation-error.js";

export type ComCrmSubscriptionSelfServiceResourceChangeServiceSecurity = {
  secretAPIKey: string;
};

/**
 * Actions that can be performed per Subscription service
 */
export const ComCrmSubscriptionSelfServiceResourceChangeServiceAction = {
  Activate: "ACTIVATE",
  Cancel: "CANCEL",
  Change: "CHANGE",
  Deactivate: "DEACTIVATE",
  Pause: "PAUSE",
  Regret: "REGRET",
  Resume: "RESUME",
} as const;
/**
 * Actions that can be performed per Subscription service
 */
export type ComCrmSubscriptionSelfServiceResourceChangeServiceAction =
  ClosedEnum<typeof ComCrmSubscriptionSelfServiceResourceChangeServiceAction>;

/**
 * Applicable and required when upgrading or downgrading a service
 */
export type ChangeToService = {
  /**
   * The new service product to which the service will be changed with
   */
  productId: string;
  /**
   * Required when the new service has multiple price terms. If the new service product has a single price, then it will be used by default
   */
  priceTermsId?: string | undefined;
};

export type Added = {
  /**
   * The component service's identifier. Only termed services can eb specified and as ong as the service meets the bundle's allowed composition
   */
  productId?: string | undefined;
  /**
   * The component service's price terms
   */
  priceTermsId?: string | undefined;
};

export type Removed = {
  /**
   * The entity identifier that will be created
   */
  id?: string | undefined;
};

/**
 * Applicable when amending a service bundle. At least one components to be added or to be removed must be specified
 */
export type Components = {
  /**
   * Component services to be added
   */
  added?: Array<Added> | undefined;
  /**
   * Component services to be removed
   */
  removed?: Array<Removed> | undefined;
};

/**
 * Unlocks a promotion through a (promotion) pass by providing the pass code
 */
export type ComCrmSubscriptionSelfServiceResourceChangeServicePass = {
  /**
   * The pass code
   */
  code: string;
  /**
   * The pass pin. Required only if the pass is assiociated with a pin
   */
  pin?: string | undefined;
};

export type ComCrmSubscriptionSelfServiceResourceChangeServiceLocation = {
  /**
   * The entity identifier that will be created
   */
  id?: string | undefined;
};

export type EnabledDevice = {
  /**
   * The entity identifier that will be created
   */
  id?: string | undefined;
};

export type ComCrmSubscriptionSelfServiceResourceChangeServiceRequestBody = {
  /**
   * Actions that can be performed per Subscription service
   */
  action: ComCrmSubscriptionSelfServiceResourceChangeServiceAction;
  /**
   * The action's category unique identifier
   */
  categoryId?: string | undefined;
  /**
   * The date on which the action is scheduled to be executed. If not specified, the action is immediatelly executed
   */
  scheduledDate?: number | undefined;
  /**
   * Applicable when business rules enforce an action to be performed on a future scheduled date. Set this parameter to True to indirectly use the business rules' prposed scheduled date without explicitly defining it
   */
  useProposedDate?: boolean | undefined;
  /**
   * Applicable and required when pausing a service. Defines the paused period's duration in days
   */
  numberOfDays?: number | undefined;
  /**
   * Applicable when changing the terms of a service OR changing/swapping services
   */
  quantity?: number | undefined;
  /**
   * Applicable when changing a service's price
   */
  priceTermsId?: string | undefined;
  /**
   * Applicable and required when upgrading or downgrading a service
   */
  changeToService?: ChangeToService | undefined;
  /**
   * Applicable when amending a service bundle. At least one components to be added or to be removed must be specified
   */
  components?: Components | undefined;
  /**
   * Unlocks a promotion through a (promotion) pass by providing the pass code
   */
  pass?: ComCrmSubscriptionSelfServiceResourceChangeServicePass | undefined;
  /**
   * A list of contact addresses that represents the actual locations at which the service is being delivered/used. Locations are represented by the contact's addresses
   */
  locations?:
    | Array<ComCrmSubscriptionSelfServiceResourceChangeServiceLocation>
    | undefined;
  /**
   * List of devices on which the service will be enabled on after this action is performed
   */
  enabledDevices?: Array<EnabledDevice> | undefined;
};

export type ComCrmSubscriptionSelfServiceResourceChangeServiceRequest = {
  id: string;
  body?:
    | ComCrmSubscriptionSelfServiceResourceChangeServiceRequestBody
    | undefined;
};

/**
 * OK
 */
export type ComCrmSubscriptionSelfServiceResourceChangeServiceResponse = {
  /**
   * The entity identifier that will be created
   */
  id?: string | undefined;
  /**
   * A proposed date on which the requested changes can be scheduled to be executed. If a date is returned, then no action is logged yet and it has to be scheduled. A proposed scheduled date is returned when business rules do not allow the action's immediate execution
   */
  proposedDate?: number | undefined;
};

/** @internal */
export type ComCrmSubscriptionSelfServiceResourceChangeServiceSecurity$Outbound =
  {
    Secret_API_key: string;
  };

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceChangeServiceSecurity$outboundSchema:
  z.ZodMiniType<
    ComCrmSubscriptionSelfServiceResourceChangeServiceSecurity$Outbound,
    ComCrmSubscriptionSelfServiceResourceChangeServiceSecurity
  > = z.pipe(
    z.object({
      secretAPIKey: z.string(),
    }),
    z.transform((v) => {
      return remap$(v, {
        secretAPIKey: "Secret_API_key",
      });
    }),
  );

export function comCrmSubscriptionSelfServiceResourceChangeServiceSecurityToJSON(
  comCrmSubscriptionSelfServiceResourceChangeServiceSecurity:
    ComCrmSubscriptionSelfServiceResourceChangeServiceSecurity,
): string {
  return JSON.stringify(
    ComCrmSubscriptionSelfServiceResourceChangeServiceSecurity$outboundSchema
      .parse(comCrmSubscriptionSelfServiceResourceChangeServiceSecurity),
  );
}

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceChangeServiceAction$outboundSchema:
  z.ZodMiniEnum<
    typeof ComCrmSubscriptionSelfServiceResourceChangeServiceAction
  > = z.enum(ComCrmSubscriptionSelfServiceResourceChangeServiceAction);

/** @internal */
export type ChangeToService$Outbound = {
  product_id: string;
  price_terms_id?: string | undefined;
};

/** @internal */
export const ChangeToService$outboundSchema: z.ZodMiniType<
  ChangeToService$Outbound,
  ChangeToService
> = z.pipe(
  z.object({
    productId: z.string(),
    priceTermsId: z.optional(z.string()),
  }),
  z.transform((v) => {
    return remap$(v, {
      productId: "product_id",
      priceTermsId: "price_terms_id",
    });
  }),
);

export function changeToServiceToJSON(
  changeToService: ChangeToService,
): string {
  return JSON.stringify(ChangeToService$outboundSchema.parse(changeToService));
}

/** @internal */
export type Added$Outbound = {
  product_id?: string | undefined;
  price_terms_id?: string | undefined;
};

/** @internal */
export const Added$outboundSchema: z.ZodMiniType<Added$Outbound, Added> = z
  .pipe(
    z.object({
      productId: z.optional(z.string()),
      priceTermsId: z.optional(z.string()),
    }),
    z.transform((v) => {
      return remap$(v, {
        productId: "product_id",
        priceTermsId: "price_terms_id",
      });
    }),
  );

export function addedToJSON(added: Added): string {
  return JSON.stringify(Added$outboundSchema.parse(added));
}

/** @internal */
export type Removed$Outbound = {
  id?: string | undefined;
};

/** @internal */
export const Removed$outboundSchema: z.ZodMiniType<Removed$Outbound, Removed> =
  z.object({
    id: z.optional(z.string()),
  });

export function removedToJSON(removed: Removed): string {
  return JSON.stringify(Removed$outboundSchema.parse(removed));
}

/** @internal */
export type Components$Outbound = {
  added?: Array<Added$Outbound> | undefined;
  removed?: Array<Removed$Outbound> | undefined;
};

/** @internal */
export const Components$outboundSchema: z.ZodMiniType<
  Components$Outbound,
  Components
> = z.object({
  added: z.optional(z.array(z.lazy(() => Added$outboundSchema))),
  removed: z.optional(z.array(z.lazy(() => Removed$outboundSchema))),
});

export function componentsToJSON(components: Components): string {
  return JSON.stringify(Components$outboundSchema.parse(components));
}

/** @internal */
export type ComCrmSubscriptionSelfServiceResourceChangeServicePass$Outbound = {
  code: string;
  pin?: string | undefined;
};

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceChangeServicePass$outboundSchema:
  z.ZodMiniType<
    ComCrmSubscriptionSelfServiceResourceChangeServicePass$Outbound,
    ComCrmSubscriptionSelfServiceResourceChangeServicePass
  > = z.object({
    code: z.string(),
    pin: z.optional(z.string()),
  });

export function comCrmSubscriptionSelfServiceResourceChangeServicePassToJSON(
  comCrmSubscriptionSelfServiceResourceChangeServicePass:
    ComCrmSubscriptionSelfServiceResourceChangeServicePass,
): string {
  return JSON.stringify(
    ComCrmSubscriptionSelfServiceResourceChangeServicePass$outboundSchema.parse(
      comCrmSubscriptionSelfServiceResourceChangeServicePass,
    ),
  );
}

/** @internal */
export type ComCrmSubscriptionSelfServiceResourceChangeServiceLocation$Outbound =
  {
    id?: string | undefined;
  };

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceChangeServiceLocation$outboundSchema:
  z.ZodMiniType<
    ComCrmSubscriptionSelfServiceResourceChangeServiceLocation$Outbound,
    ComCrmSubscriptionSelfServiceResourceChangeServiceLocation
  > = z.object({
    id: z.optional(z.string()),
  });

export function comCrmSubscriptionSelfServiceResourceChangeServiceLocationToJSON(
  comCrmSubscriptionSelfServiceResourceChangeServiceLocation:
    ComCrmSubscriptionSelfServiceResourceChangeServiceLocation,
): string {
  return JSON.stringify(
    ComCrmSubscriptionSelfServiceResourceChangeServiceLocation$outboundSchema
      .parse(comCrmSubscriptionSelfServiceResourceChangeServiceLocation),
  );
}

/** @internal */
export type EnabledDevice$Outbound = {
  id?: string | undefined;
};

/** @internal */
export const EnabledDevice$outboundSchema: z.ZodMiniType<
  EnabledDevice$Outbound,
  EnabledDevice
> = z.object({
  id: z.optional(z.string()),
});

export function enabledDeviceToJSON(enabledDevice: EnabledDevice): string {
  return JSON.stringify(EnabledDevice$outboundSchema.parse(enabledDevice));
}

/** @internal */
export type ComCrmSubscriptionSelfServiceResourceChangeServiceRequestBody$Outbound =
  {
    action: string;
    category_id?: string | undefined;
    scheduled_date?: number | undefined;
    use_proposed_date?: boolean | undefined;
    number_of_days?: number | undefined;
    quantity?: number | undefined;
    price_terms_id?: string | undefined;
    change_to_service?: ChangeToService$Outbound | undefined;
    components?: Components$Outbound | undefined;
    pass?:
      | ComCrmSubscriptionSelfServiceResourceChangeServicePass$Outbound
      | undefined;
    locations?:
      | Array<
        ComCrmSubscriptionSelfServiceResourceChangeServiceLocation$Outbound
      >
      | undefined;
    enabled_devices?: Array<EnabledDevice$Outbound> | undefined;
  };

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceChangeServiceRequestBody$outboundSchema:
  z.ZodMiniType<
    ComCrmSubscriptionSelfServiceResourceChangeServiceRequestBody$Outbound,
    ComCrmSubscriptionSelfServiceResourceChangeServiceRequestBody
  > = z.pipe(
    z.object({
      action:
        ComCrmSubscriptionSelfServiceResourceChangeServiceAction$outboundSchema,
      categoryId: z.optional(z.string()),
      scheduledDate: z.optional(z.int()),
      useProposedDate: z.optional(z.boolean()),
      numberOfDays: z.optional(z.int()),
      quantity: z.optional(z.int()),
      priceTermsId: z.optional(z.string()),
      changeToService: z.optional(z.lazy(() => ChangeToService$outboundSchema)),
      components: z.optional(z.lazy(() => Components$outboundSchema)),
      pass: z.optional(z.lazy(() =>
        ComCrmSubscriptionSelfServiceResourceChangeServicePass$outboundSchema
      )),
      locations: z.optional(z.array(z.lazy(() =>
        ComCrmSubscriptionSelfServiceResourceChangeServiceLocation$outboundSchema
      ))),
      enabledDevices: z.optional(z.array(z.lazy(() =>
        EnabledDevice$outboundSchema
      ))),
    }),
    z.transform((v) => {
      return remap$(v, {
        categoryId: "category_id",
        scheduledDate: "scheduled_date",
        useProposedDate: "use_proposed_date",
        numberOfDays: "number_of_days",
        priceTermsId: "price_terms_id",
        changeToService: "change_to_service",
        enabledDevices: "enabled_devices",
      });
    }),
  );

export function comCrmSubscriptionSelfServiceResourceChangeServiceRequestBodyToJSON(
  comCrmSubscriptionSelfServiceResourceChangeServiceRequestBody:
    ComCrmSubscriptionSelfServiceResourceChangeServiceRequestBody,
): string {
  return JSON.stringify(
    ComCrmSubscriptionSelfServiceResourceChangeServiceRequestBody$outboundSchema
      .parse(comCrmSubscriptionSelfServiceResourceChangeServiceRequestBody),
  );
}

/** @internal */
export type ComCrmSubscriptionSelfServiceResourceChangeServiceRequest$Outbound =
  {
    id: string;
    body?:
      | ComCrmSubscriptionSelfServiceResourceChangeServiceRequestBody$Outbound
      | undefined;
  };

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceChangeServiceRequest$outboundSchema:
  z.ZodMiniType<
    ComCrmSubscriptionSelfServiceResourceChangeServiceRequest$Outbound,
    ComCrmSubscriptionSelfServiceResourceChangeServiceRequest
  > = z.object({
    id: z.string(),
    body: z.optional(
      z.lazy(() =>
        ComCrmSubscriptionSelfServiceResourceChangeServiceRequestBody$outboundSchema
      ),
    ),
  });

export function comCrmSubscriptionSelfServiceResourceChangeServiceRequestToJSON(
  comCrmSubscriptionSelfServiceResourceChangeServiceRequest:
    ComCrmSubscriptionSelfServiceResourceChangeServiceRequest,
): string {
  return JSON.stringify(
    ComCrmSubscriptionSelfServiceResourceChangeServiceRequest$outboundSchema
      .parse(comCrmSubscriptionSelfServiceResourceChangeServiceRequest),
  );
}

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceChangeServiceResponse$inboundSchema:
  z.ZodMiniType<
    ComCrmSubscriptionSelfServiceResourceChangeServiceResponse,
    unknown
  > = z.pipe(
    z.object({
      id: types.optional(types.string()),
      proposed_date: types.optional(types.number()),
    }),
    z.transform((v) => {
      return remap$(v, {
        "proposed_date": "proposedDate",
      });
    }),
  );

export function comCrmSubscriptionSelfServiceResourceChangeServiceResponseFromJSON(
  jsonString: string,
): SafeParseResult<
  ComCrmSubscriptionSelfServiceResourceChangeServiceResponse,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      ComCrmSubscriptionSelfServiceResourceChangeServiceResponse$inboundSchema
        .parse(JSON.parse(x)),
    `Failed to parse 'ComCrmSubscriptionSelfServiceResourceChangeServiceResponse' from JSON`,
  );
}
