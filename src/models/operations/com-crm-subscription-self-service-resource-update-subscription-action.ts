/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4-mini";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import { ClosedEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import * as types from "../../types/primitives.js";
import { SDKValidationError } from "../errors/sdk-validation-error.js";

export type ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionSecurity =
  {
    secretAPIKey?: string | undefined;
    authorization?: string | undefined;
  };

/**
 * How the action is updated
 */
export const ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionAction =
  {
    Cancel: "CANCEL",
    Update: "UPDATE",
    Terminate: "TERMINATE",
  } as const;
/**
 * How the action is updated
 */
export type ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionAction =
  ClosedEnum<
    typeof ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionAction
  >;

/**
 * Applicable only for Scheduled actions that include period settings such as Paused period
 */
export type PeriodSettings = {
  /**
   * The new period's duration in days
   */
  durationInDays?: number | undefined;
  /**
   * TThe new period's end date
   */
  endsOn?: number | undefined;
};

export type ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody =
  {
    /**
     * How the action is updated
     */
    action: ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionAction;
    /**
     * The action's category
     */
    categoryId?: string | undefined;
    /**
     * Set a new scheduled date for the action, The new scheduled date must comply with business rules
     */
    scheduledDate?: number | undefined;
    /**
     * Applicable only for Scheduled actions that include period settings such as Paused period
     */
    periodSettings?: PeriodSettings | undefined;
    /**
     * Reschedule the action by applying business rules such as when a service can be cancelled. When set to True and business rules enforce a specific date of execution, then the action will be automatically scheduled on the rules' suggested date
     */
    useProposedDate?: boolean | undefined;
  };

export type ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequest =
  {
    id: string;
    body?:
      | ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody
      | undefined;
  };

/**
 * OK
 */
export type ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionResponse =
  {
    /**
     * The entity identifier that will be created
     */
    id?: string | undefined;
    /**
     * A proposed date on which the requested changes can be scheduled to be executed. If a date is returned, then no action is logged yet and it has to be scheduled. A proposed scheduled date is returned when business rules do not allow the action's immediate execution
     */
    proposedDate?: number | undefined;
  };

/** @internal */
export type ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionSecurity$Outbound =
  {
    Secret_API_key?: string | undefined;
    authorization?: string | undefined;
  };

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionSecurity$outboundSchema:
  z.ZodMiniType<
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionSecurity$Outbound,
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionSecurity
  > = z.pipe(
    z.object({
      secretAPIKey: z.optional(z.string()),
      authorization: z.optional(z.string()),
    }),
    z.transform((v) => {
      return remap$(v, {
        secretAPIKey: "Secret_API_key",
      });
    }),
  );

export function comCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionSecurityToJSON(
  comCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionSecurity:
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionSecurity,
): string {
  return JSON.stringify(
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionSecurity$outboundSchema
      .parse(
        comCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionSecurity,
      ),
  );
}

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionAction$outboundSchema:
  z.ZodMiniEnum<
    typeof ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionAction
  > = z.enum(
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionAction,
  );

/** @internal */
export type PeriodSettings$Outbound = {
  duration_in_days?: number | undefined;
  ends_on?: number | undefined;
};

/** @internal */
export const PeriodSettings$outboundSchema: z.ZodMiniType<
  PeriodSettings$Outbound,
  PeriodSettings
> = z.pipe(
  z.object({
    durationInDays: z.optional(z.int()),
    endsOn: z.optional(z.int()),
  }),
  z.transform((v) => {
    return remap$(v, {
      durationInDays: "duration_in_days",
      endsOn: "ends_on",
    });
  }),
);

export function periodSettingsToJSON(periodSettings: PeriodSettings): string {
  return JSON.stringify(PeriodSettings$outboundSchema.parse(periodSettings));
}

/** @internal */
export type ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody$Outbound =
  {
    action: string;
    category_id?: string | undefined;
    scheduled_date?: number | undefined;
    period_settings?: PeriodSettings$Outbound | undefined;
    use_proposed_date?: boolean | undefined;
  };

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody$outboundSchema:
  z.ZodMiniType<
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody$Outbound,
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody
  > = z.pipe(
    z.object({
      action:
        ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionAction$outboundSchema,
      categoryId: z.optional(z.string()),
      scheduledDate: z.optional(z.int()),
      periodSettings: z.optional(z.lazy(() => PeriodSettings$outboundSchema)),
      useProposedDate: z.optional(z.boolean()),
    }),
    z.transform((v) => {
      return remap$(v, {
        categoryId: "category_id",
        scheduledDate: "scheduled_date",
        periodSettings: "period_settings",
        useProposedDate: "use_proposed_date",
      });
    }),
  );

export function comCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBodyToJSON(
  comCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody:
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody,
): string {
  return JSON.stringify(
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody$outboundSchema
      .parse(
        comCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody,
      ),
  );
}

/** @internal */
export type ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequest$Outbound =
  {
    id: string;
    body?:
      | ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody$Outbound
      | undefined;
  };

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequest$outboundSchema:
  z.ZodMiniType<
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequest$Outbound,
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequest
  > = z.object({
    id: z.string(),
    body: z.optional(
      z.lazy(() =>
        ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestBody$outboundSchema
      ),
    ),
  });

export function comCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequestToJSON(
  comCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequest:
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequest,
): string {
  return JSON.stringify(
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequest$outboundSchema
      .parse(
        comCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionRequest,
      ),
  );
}

/** @internal */
export const ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionResponse$inboundSchema:
  z.ZodMiniType<
    ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionResponse,
    unknown
  > = z.pipe(
    z.object({
      id: types.optional(types.string()),
      proposed_date: types.optional(types.number()),
    }),
    z.transform((v) => {
      return remap$(v, {
        "proposed_date": "proposedDate",
      });
    }),
  );

export function comCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionResponseFromJSON(
  jsonString: string,
): SafeParseResult<
  ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionResponse,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionResponse$inboundSchema
        .parse(JSON.parse(x)),
    `Failed to parse 'ComCrmSubscriptionSelfServiceResourceUpdateSubscriptionActionResponse' from JSON`,
  );
}
